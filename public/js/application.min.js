!function t(o,n,e){function a(r,s){if(!n[r]){if(!o[r]){var u="function"==typeof require&&require;if(!s&&u)return u(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+r+"'")}var c=n[r]={exports:{}};o[r][0].call(c.exports,function(t){var n=o[r][1][t];return a(n?n:t)},c,c.exports,t,o,n,e)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<e.length;r++)a(e[r]);return a}({1:[function(t,o){var n={name:"Miami",latitude:36.18,longitude:-115.18,regionBias:"35.773258,-115.642090|36.469890,-114.636840",initialZoom:13,finalZoom:14,fileName:"/data/region.geojson",tagline:"Because the city boundaries are a lot weirder than you think.",about:"Las Vegas is one of the most visited cities in the world, and yet its most famous destination &mdash; a 6.8km boulevard of extravagantly themed casinos commonly known as ‘The Strip’ &mdash; is actually located outside of Las Vegas city limits.  To add to the confusion, the city’s true borders are often jagged and full of small holes.  According to the U.S. Postal Service, local residents may still claim a Las Vegas address, even if they are under the jurisdiction of one of the surrounding unincorporated communities throughout Clark County.  As a result, the City of Las Vegas requires residents verify that they reside within city limits to receive city services.",responseYes:"You are within city limits!",responseNo:"You are not in Las Vegas!",examples:["1319 Shadow Mountain Place","3497 Holly Ave","953 East Sahara Avenue","3490 N Torrey Pines Drive","8787 W Washburn Drive","3355 South Las Vegas Boulevard","6967 W Tropical Parkway"]};o.exports=n},{}],2:[function(t,o){!function(){function t(t){for(var o=[],n=[],e=0;e<t[0].length;e++)o.push(t[0][e][1]),n.push(t[0][e][0]);return o=o.sort(function(t,o){return t-o}),n=n.sort(function(t,o){return t-o}),[[o[0],n[0]],[o[o.length-1],n[n.length-1]]]}function n(t,o,n){for(var e=[[0,0]],a=0;a<n.length;a++){for(var i=0;i<n[a].length;i++)e.push(n[a][i]);e.push(n[a][0]),e.push([0,0])}for(var r=!1,a=0,i=e.length-1;a<e.length;i=a++)e[a][0]>o!=e[i][0]>o&&t<(e[i][1]-e[a][1])*(o-e[a][0])/(e[i][0]-e[a][0])+e[a][1]&&(r=!r);return r}var e=this.gju={};"undefined"!=typeof o&&o.exports&&(o.exports=e),e.lineStringsIntersect=function(t,o){for(var n=[],e=0;e<=t.coordinates.length-2;++e)for(var a=0;a<=o.coordinates.length-2;++a){var i={x:t.coordinates[e][1],y:t.coordinates[e][0]},r={x:t.coordinates[e+1][1],y:t.coordinates[e+1][0]},s={x:o.coordinates[a][1],y:o.coordinates[a][0]},u={x:o.coordinates[a+1][1],y:o.coordinates[a+1][0]},c=(u.x-s.x)*(i.y-s.y)-(u.y-s.y)*(i.x-s.x),l=(r.x-i.x)*(i.y-s.y)-(r.y-i.y)*(i.x-s.x),d=(u.y-s.y)*(r.x-i.x)-(u.x-s.x)*(r.y-i.y);if(0!=d){var h=c/d,f=l/d;h>=0&&1>=h&&f>=0&&1>=f&&n.push({type:"Point",coordinates:[i.x+h*(r.x-i.x),i.y+h*(r.y-i.y)]})}}return 0==n.length&&(n=!1),n},e.pointInBoundingBox=function(t,o){return!(t.coordinates[1]<o[0][0]||t.coordinates[1]>o[1][0]||t.coordinates[0]<o[0][1]||t.coordinates[0]>o[1][1])},e.pointInPolygon=function(o,a){for(var i="Polygon"==a.type?[a.coordinates]:a.coordinates,r=!1,s=0;s<i.length;s++)e.pointInBoundingBox(o,t(i[s]))&&(r=!0);if(!r)return!1;for(var u=!1,s=0;s<i.length;s++)n(o.coordinates[1],o.coordinates[0],i[s])&&(u=!0);return u},e.pointInMultiPolygon=function(o,a){for(var i="MultiPolygon"==a.type?[a.coordinates]:a.coordinates,r=!1,s=!1,u=0;u<i.length;u++){for(var c=i[u],l=0;l<c.length;l++)r||e.pointInBoundingBox(o,t(c[l]))&&(r=!0);if(!r)return!1;for(var l=0;l<c.length;l++)s||n(o.coordinates[1],o.coordinates[0],c[l])&&(s=!0)}return s},e.numberToRadius=function(t){return t*Math.PI/180},e.numberToDegree=function(t){return 180*t/Math.PI},e.drawCircle=function(t,o,n){for(var a=[o.coordinates[1],o.coordinates[0]],i=t/1e3/6371,r=[e.numberToRadius(a[0]),e.numberToRadius(a[1])],n=n||15,s=[[a[0],a[1]]],u=0;n>u;u++){var c=2*Math.PI*u/n,l=Math.asin(Math.sin(r[0])*Math.cos(i)+Math.cos(r[0])*Math.sin(i)*Math.cos(c)),d=r[1]+Math.atan2(Math.sin(c)*Math.sin(i)*Math.cos(r[0]),Math.cos(i)-Math.sin(r[0])*Math.sin(l));s[u]=[],s[u][1]=e.numberToDegree(l),s[u][0]=e.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},e.rectangleCentroid=function(t){var o=t.coordinates[0],n=o[0][0],e=o[0][1],a=o[2][0],i=o[2][1],r=a-n,s=i-e;return{type:"Point",coordinates:[n+r/2,e+s/2]}},e.pointDistance=function(t,o){var n=t.coordinates[0],a=t.coordinates[1],i=o.coordinates[0],r=o.coordinates[1],s=e.numberToRadius(r-a),u=e.numberToRadius(i-n),c=Math.pow(Math.sin(s/2),2)+Math.cos(e.numberToRadius(a))*Math.cos(e.numberToRadius(r))*Math.pow(Math.sin(u/2),2),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return 6371*l*1e3},e.geometryWithinRadius=function(t,o,n){if("Point"==t.type)return e.pointDistance(t,o)<=n;if("LineString"==t.type||"Polygon"==t.type){var a,i={};a="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var r in a)if(i.coordinates=a[r],e.pointDistance(i,o)>n)return!1}return!0},e.area=function(t){for(var o,n,e=0,a=t.coordinates[0],i=a.length-1,r=0;r<a.length;i=r++){var o={x:a[r][1],y:a[r][0]},n={x:a[i][1],y:a[i][0]};e+=o.x*n.y,e-=o.y*n.x}return e/=2},e.centroid=function(t){for(var o,n,a,i=0,r=0,s=t.coordinates[0],u=s.length-1,c=0;c<s.length;u=c++){var n={x:s[c][1],y:s[c][0]},a={x:s[u][1],y:s[u][0]};o=n.x*a.y-a.x*n.y,i+=(n.x+a.x)*o,r+=(n.y+a.y)*o}return o=6*e.area(t),{type:"Point",coordinates:[r/o,i/o]}},e.simplify=function(t,o){o=o||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var n,e,a,i,r,s,u,c,l,d,h,f,p,g,m,y,v,w,b,M=Math.PI/180*.5,x=new Array,k=new Array,$=new Array;if(t.length<3)return t;for(n=t.length,d=360*o/(2*Math.PI*6378137),d*=d,a=0,k[0]=0,$[0]=n-1,e=1;e>0;)if(i=k[e-1],r=$[e-1],e--,r-i>1){for(h=t[r].lng()-t[i].lng(),f=t[r].lat()-t[i].lat(),Math.abs(h)>180&&(h=360-Math.abs(h)),h*=Math.cos(M*(t[r].lat()+t[i].lat())),p=h*h+f*f,s=i+1,u=i,l=-1;r>s;s++)g=t[s].lng()-t[i].lng(),m=t[s].lat()-t[i].lat(),Math.abs(g)>180&&(g=360-Math.abs(g)),g*=Math.cos(M*(t[s].lat()+t[i].lat())),y=g*g+m*m,v=t[s].lng()-t[r].lng(),w=t[s].lat()-t[r].lat(),Math.abs(v)>180&&(v=360-Math.abs(v)),v*=Math.cos(M*(t[s].lat()+t[r].lat())),b=v*v+w*w,c=y>=p+b?b:b>=p+y?y:(g*f-m*h)*(g*f-m*h)/p,c>l&&(u=s,l=c);d>l?(x[a]=i,a++):(e++,k[e-1]=u,$[e-1]=r,e++,k[e-1]=i,$[e-1]=u)}else x[a]=i,a++;x[a]=n-1,a++;for(var P=new Array,s=0;a>s;s++)P.push(t[x[s]]);return P.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},e.destinationPoint=function(t,o,n){n/=6371,o=e.numberToRadius(o);var a=e.numberToRadius(t.coordinates[0]),i=e.numberToRadius(t.coordinates[1]),r=Math.asin(Math.sin(i)*Math.cos(n)+Math.cos(i)*Math.sin(n)*Math.cos(o)),s=a+Math.atan2(Math.sin(o)*Math.sin(n)*Math.cos(i),Math.cos(n)-Math.sin(i)*Math.sin(r));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[e.numberToDegree(s),e.numberToDegree(r)]}}}()},{}],3:[function(t){"use strict";function o(){Modernizr.history&&window.history.replaceState(null,null,document.URL),a(),v()}function n(t){O=t,R=new Z(t),$("#input-target").on("click",p),$("#location-form").on("submit",g),$("#about-link").on("click",L),$("#about-close").on("click",D),$("#example-link").on("click",i),$("#dismiss-ie-browser").on("click",e),$("#input-location").focus(),R.render(),$("#map").addClass("no-panning"),$(document).keydown(function(t){27===t.which&&t.ctrlKey===!1&&t.metaKey===!1&&u()}),Modernizr.svg||($("#fallback-shield").html('<img src="/img/white_shield.png">'),$("#fallback-flag-tag").html('<img src="/img/flag-tag.png" alt="Code for America" width="32" height="8">'))}function e(t){t.preventDefault(),$(".ie-browser").hide()}function a(){var t=window.location.search.substr(1),o=t.split("="),n=o[0],e=o[1];switch(n){case"about":C();break;case"latlng":if(!e){s();break}var a=parseFloat(e.split(",")[0]),i=parseFloat(e.split(",")[1]);a&&i?M(a,i):s();break;case"address":e?T(decodeURIComponent(e)):s();break;default:s()}}function i(t){t.preventDefault();var o=$("#example-link").text();$("#input-location").val(o)}function r(){var t=N.examples||[];if(t.length>0){var o=Math.floor(Math.random()*t.length);$("#example-link").text(t[o])}}function s(){$("#question").show(),$("#input-location").val(""),$("#alert").hide(),S(),k(),$("#question").fadeIn(150),$("#input-location").focus(),$("#map").addClass("no-panning"),r(),R&&R.reset()}function u(){s(),Modernizr.history?window.history.pushState({},null,"/"):window.location="/"}function c(t){t.preventDefault(),u()}function l(t){var o;o="Yes"===t?N.responseYes:N.responseNo,$("#question").fadeOut(250,function(){R.createMarker(A,B),R.createPopup(A,B,t,o),R.setLocation(A,B,N.finalZoom),$("#map").removeClass("no-panning"),$("#reset-button").on("click",c)})}function d(t,o){var n={type:"Point",coordinates:[o,t]},e=O.features[0].geometry,a=q.pointInPolygon(n,e);a?h():f()}function h(){l("Yes")}function f(){l("No")}function p(){$("#input-target .loading-text").show(),$("#input-target .default-text").hide(),w()}function g(t){t.preventDefault(),m()}function m(){var t=$("#input-location"),o=t.val();return""!==o?(P(o),Modernizr.history?window.history.pushState({page:"address",address:o},null,"/?address="+encodeURIComponent(o)):window.location="/?address="+encodeURIComponent(o)):y("Please enter an address"),!1}function y(t){$("#alert").html(t).slideDown(100)}function v(){var t=function(t){A=t.coords.latitude,B=t.coords.longitude};j(t)}function w(){var t=function(t){A=t.coords.latitude,B=t.coords.longitude,b(A,B)},o=function(t){console.log(t),alert("Unable to retrieve current position. Geolocation may be disabled on this browser or unavailable on this system."),k()};j(t,o)}function b(){M(A,B),x(A,B)}function M(t,o){A=t,B=o;var n=function(){O.features&&O.features.length>0?d(A,B):window.setTimeout(n,500)};n()}function x(t,o){var n="?latlng="+t+","+o;Modernizr.history?window.history.pushState({page:"latlng",latitude:t,longitude:o},null,n):window.location=n}function k(){$("#input-target .loading-text").hide(),$("#input-target .default-text").show()}function P(t){z(t,N.regionBias,function(t){if(t&&t.results.length>0){var o=t.results[0].geometry.location;A=o.lat,B=o.lng;var n=function(){O.features&&O.features.length>0?d(A,B):window.setTimeout(n,500)};n()}else $("#question").show(),y("No results for this address!")})}function T(t){P(t)}function L(t){t.preventDefault(),Modernizr.history?window.history.pushState({page:"about"},null,"?about"):window.location="?about",I()}function I(){$("#location-form").fadeOut(200,function(){$("#about").fadeIn(200)})}function C(){$("#question").show(),$("#location-form").hide(),$("#about").show()}function D(t){t.preventDefault(),u()}function S(){$("#about").fadeOut(200,function(){$("#location-form").fadeIn(200)})}var R,A,B,q=t("geojson-utils"),z=t("./geocode"),j=t("./current_location"),Z=t("./map"),N=t("../config"),O={};window.onpopstate=function(t){if(!t.state)return void a();switch(t.state.page){case"about":I();break;case"latlng":M(t.state.latitude,t.state.longitude);break;case"address":T(t.state.address);break;default:s()}},o(),$.getJSON(N.fileName,function(t){n(t)})},{"../config":1,"./current_location":4,"./geocode":5,"./map":6,"geojson-utils":2}],4:[function(t,o){var n=function(t,o){var n=window.navigator.geolocation,e={enableHighAccuracy:!0,maximumAge:1e4};n?window.setTimeout(function(){n.getCurrentPosition(t,o,e)},0):console.log("Browser does not support geolocation")};o.exports=n},{}],5:[function(t,o){"use strict";var n="http://maps.googleapis.com/maps/api/geocode/json",e=function(t,o,e){var a={address:t,bounds:o,sensor:!1},i=n+"?"+$.param(a);$.ajax(i,{success:e})};o.exports=e},{}],6:[function(t,o){"use strict";var n=t("../config"),e='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',a="http://tile.stamen.com/toner/{z}/{x}/{y}.png",i="/img/marker.svg";window.devicePixelRatio>1&&(a="http://tile.stamen.com/toner/{z}/{x}/{y}@2x.png"),Modernizr.svg||(i="/img/marker.png");var r={color:"#f11",weight:5,opacity:.1},s=function(t){this.json=t,this.map=L.map("map",{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,closePopupOnClick:!1,keyboard:!1,zoomControl:!1}),this.markers=[]},u=L.icon({iconUrl:i,shadowUrl:"/img/marker_shadow.png",iconSize:[36,43],shadowSize:[100,50],iconAnchor:[18,43],shadowAnchor:[40,44],popupAnchor:[0,-50]});s.prototype.render=function(){L.tileLayer(a,{attribution:e,maxZoom:23}).addTo(this.map),L.geoJson(this.json,{style:r}).addTo(this.map),this.reset()},s.prototype.reset=function(){this.removeMarkers(),this.setLocation(n.latitude,n.longitude,n.initialZoom),this.map.closePopup(),this.map.dragging.disable()},s.prototype.setLocation=function(t,o,n){return t+=.01,this.map.setView([t,o],n),this.map.dragging.enable(),!0},s.prototype.createMarker=function(t,o){var n=L.marker([t,o],{icon:u,clickable:!1}).addTo(this.map);return this.markers.push(n),!0},s.prototype.createPopup=function(t,o,n,e){var a="";a+='<div class="popup-background"><svg class="svg-popup"><use xlink:href="#svg-popup"></svg></div>',a+="<h2>"+n+"</h2><p>"+e+"</p>",a+='<button id="reset-button">Again?</button>',L.popup({autoPan:!1,closeButton:!1}).setLatLng([t,o]).setContent(a).openOn(this.map)},s.prototype.removeMarkers=function(){for(var t=0;t<this.markers.length;t++)this.map.removeLayer(this.markers[t]);return!0},o.exports=s},{"../config":1}]},{},[3]);